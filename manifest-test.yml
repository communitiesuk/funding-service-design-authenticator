---
applications:
- name: funding-service-design-authenticator-test
  memory: 128M
  buildpacks:
  - https://github.com/cloudfoundry/python-buildpack.git
  command: gunicorn wsgi:app -c run/gunicorn/devtest.py
  # TODO: Remove gids.dev domain if fundingservice.co.uk domain DNS gets restored.
  env:
    AUTHENTICATOR_HOST: https://authenticator2.test.gids.dev
    ACCOUNT_STORE_API_HOST: https://funding-service-design-account-store-test.london.cloudapps.digital
    APPLICATION_STORE_API_HOST: https://funding-service-design-application-store-test.london.cloudapps.digital
    NOTIFICATION_SERVICE_HOST: http://funding-service-design-notification-test.apps.internal:8080
    APPLICANT_FRONTEND_HOST: https://frontend.test.gids.dev
    RSA256_PUBLIC_KEY_BASE64: ((RSA256_PUBLIC_KEY_BASE64))
    RSA256_PRIVATE_KEY_BASE64: ((RSA256_PRIVATE_KEY_BASE64))
    AZURE_AD_CLIENT_ID: ((AZURE_AD_CLIENT_ID))
    AZURE_AD_TENANT_ID: ((AZURE_AD_TENANT_ID))
    AZURE_AD_CLIENT_SECRET: ((AZURE_AD_CLIENT_SECRET))
    SECRET_KEY: ((SECRET_KEY))
    SESSION_COOKIE_NAME: ((SESSION_COOKIE_NAME))
    FLASK_ENV: test
    COOKIE_DOMAIN: .test.gids.dev
    # Sentry DSN is OK to be public see: https://docs.sentry.io/product/sentry-basics/dsn-explainer/#dsn-utilization
    SENTRY_DSN: https://96b94a5fea854bc99f132ccdebba34eb@o1432034.ingest.sentry.io/4503919190016000
    GITHUB_SHA: ((GITHUB_SHA))
  services: # eg. Redis
    - funding-service-magic-links-test
    - logit-ssl-drain
  routes:
    - route: authenticator.test.fundingservice.co.uk
    - route: authenticator2.test.gids.dev
  health-check-http-endpoint: /healthcheck
  health-check-type: http
